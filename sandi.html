<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cari Akun - Cyber Media PAI 23</title>
<style>
  body {
    font-family: 'Segoe UI', sans-serif;
    margin: 0; padding: 0;
    background: linear-gradient(to bottom, #4fc3f7, #0288d1);
    color: #fff; min-height: 100vh;
    display: flex; align-items: center; flex-direction: column;
  }
  header img { width: 200px; margin-bottom: 30px; border-radius: 50%; margin-top: 20px;}
  .search-box {
    background: rgba(255,255,255,0.15); border-radius: 15px;
    padding: 20px; box-shadow: 0px 5px 20px rgba(0,0,0,0.3); backdrop-filter: blur(10px);
    width: 90%; max-width: 500px; text-align: center;
  }
  input {
    width: 90%; padding: 12px; border-radius: 8px; border: none;
    font-size: 15px; outline: none;
  }
  ul { list-style: none; padding: 0; margin-top: 20px; }
  li {
    background: rgba(0,0,0,0.2); padding: 12px; border-radius: 8px;
    margin: 5px 0; cursor: pointer; transition: 0.3s;
  }
  li:hover { background: rgba(0,0,0,0.4); }
  /* modal detail */
  .modal {
    display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.6); justify-content: center; align-items: center;
  }
  .modal-content {
    background: #fff; color: #333; padding: 20px; border-radius: 12px;
    width: 90%; max-width: 400px; text-align: left;
  }
  .modal-content h3 { margin-top: 0; }
  .modal-buttons { margin-top: 15px; display: flex; justify-content: flex-end; gap: 10px; }
  .btn {
    background: #0288d1; color: #fff; border: none;
    padding: 10px 15px; border-radius: 8px; cursor: pointer;
    transition: 0.3s;
  }
  .btn:hover { background: #0277bd; }
  .alt-link {
    margin-top: 15px; font-size: 14px; cursor: pointer;
    color: #ffeb3b; text-decoration: underline;
  }
</style>
</head>
<body>

<header>
  <img src="cyber.png" alt="Logo Cyber Media">
</header>

<div class="search-box">
  <h2>Cari Akun Anda</h2>
  <input type="text" id="searchInput" placeholder="Ketik nama anda...">
  <ul id="resultList"></ul>
  <div class="alt-link" onclick="cobaCaraLain()">Coba Cara Lain</div>
</div>

<!-- Modal untuk detail -->
<div class="modal" id="detailModal">
  <div class="modal-content">
    <h3>Detail Anggota</h3>
    <p id="detailContent"></p>
    <div class="modal-buttons">
      <button class="btn" onclick="goLogin()">Login</button>
      <button class="btn" onclick="closeModal()">Tutup</button>
    </div>
  </div>
</div>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycby_7NpkJVfVdCjY7p0whNNJpXVVIlEptzC5Am7wg9khc_AkShVali-Qu0MunqQCUWcKFw/exec";
const ADMIN_WA = "6281234567890"; // nomor admin WA
let aData = [];

// ambil data
function loadData() {
  fetch(scriptURL)
    .then(res => res.json())
    .then(data => { aData = data; })
    .catch(err => console.error("Error:", err));
}
loadData();

document.getElementById("searchInput").addEventListener("input", function() {
  const query = this.value.trim().toLowerCase();
  const list = document.getElementById("resultList");
  list.innerHTML = "";
  if (query.length > 1) {
    const results = aData.filter(row => row.nama && row.nama.toLowerCase().includes(query));
    results.forEach(row => {
      const li = document.createElement("li");
      li.textContent = row.nama;
      li.onclick = () => {
        document.getElementById("detailContent").innerHTML =
          "<b>Nama:</b> " + (row.nama || "-") + "<br>" +
          "<b>Sandi:</b> " + (row.nim || "-") + "<br>" +
          "<b>Tanggal:</b> " + (row.tanggal || "-");
        document.getElementById("detailModal").style.display = "flex";
      };
      list.appendChild(li);
    });
  }
});

function closeModal() {
  document.getElementById("detailModal").style.display = "none";
}
function goLogin() {
  window.location.href = "Anggota.html"; // arahkan ke halaman login
}
function cobaCaraLain() {
  if (confirm("ðŸ‘‰ Hubungi admin untuk reset sandi?")) {
    window.location.href = "https://wa.me/" + ADMIN_WA + "?text=Assalamualaikum%20admin,%20saya%20lupa%20sandi.%20Mohon%20dibantu.";
  }
}
</script>
</body>
</html>